{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGalleryImg(parentEl, data) {\n  parentEl.insertAdjacentHTML('beforeend', generateMarkup(data));\n  lightbox.refresh();\n}\n\nfunction generateMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              \n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" />\n               \n                  <ul class=\"gallery-text\">\n                    <li>\n                      <span>Likes</span>\n                      <p>${likes}</p>\n                    </li>\n                    <li>\n                      <span>Views</span>\n                      <p>${views}</p>\n                    </li>\n                    <li>\n                      <span>Comments</span>\n                      <p>${comments}</p>\n                    </li>\n                    <li>\n                      <span>Downloads</span>\n                      <p>${downloads}</p>\n                    </li>\n                  </ul>\n\n            </a>\n          </li>`\n    )\n    .join(' ');\n}\n","import axios from 'axios';\n\nconst apiKey = '43344529-efab811219d9ae176ef45ef76';\nconst baseUrl = 'https://pixabay.com/api/';\n\nasync function searchImages(query, page) {\n  const perPage = 15;\n  const url = `${baseUrl}?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error searching images:', error);\n    throw new Error('Error searching images');\n  }\n}\n\nexport { searchImages };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderGalleryImg } from './js/render-functions.js';\nimport { searchImages } from './js/pixabay-api.js';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loaderWrapperEl = document.querySelector('.loader-wrapper');\nconst btnLoadMore = document.querySelector('.btn-more');\n\nlet page = 1;\nlet perPage = 15;\nlet totalContent = null;\nlet totalContentPages = null;\n\nbtnLoadMore.addEventListener('click', onLoadMore);\nform.addEventListener('submit', onSubmitForm);\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  loaderWrapperEl.classList.remove('is-hidden');\n  btnLoadMore.classList.add('is-hidden');\n  page = 1;\n  const currentSearchQuery = document.getElementById('input-text').value.trim();\n\n  if (currentSearchQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term',\n    });\n    loaderWrapperEl.classList.add('is-hidden');\n    btnLoadMore.classList.add('is-hidden');\n    return;\n  }\n  try {\n    const response = await searchImages(currentSearchQuery, page);\n    const images = response.hits;\n    totalContent = response.totalHits;\n    totalContentPages = Math.ceil(totalContent / perPage);\n\n    if (images.length > 0) {\n      renderGalleryImg(gallery, images);\n      btnLoadMore.classList.remove('is-hidden');\n    } else {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      btnLoadMore.classList.add('is-hidden');\n    }\n  } catch (error) {\n    console.error('Error searching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message:\n        'An error occurred while searching for images. Please try again later.',\n    });\n  } finally {\n    loaderWrapperEl.classList.add('is-hidden');\n  }\n}\n\nasync function onLoadMore(event) {\n  const currentSearchQuery = document.getElementById('input-text').value.trim();\n  page += 1;\n  loaderWrapperEl.classList.remove('is-hidden');\n  try {\n    const response = await searchImages(currentSearchQuery, page);\n    if (response && response.hits && response.hits.length > 0) {\n      const images = response.hits;\n      renderGalleryImg(gallery, images);\n      smoothScrollToGallery();\n      if (page === totalContentPages) {\n        btnLoadMore.classList.add('is-hidden');\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } else {\n      iziToast.info({\n        title: 'Info',\n        message: 'No more images available for this search term.',\n      });\n      btnLoadMore.classList.add('is-hidden');\n    }\n  } catch (error) {\n    console.error('Error loading more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message:\n        'An error occurred while loading more images. Please try again later.',\n    });\n  } finally {\n    loaderWrapperEl.classList.add('is-hidden');\n  }\n}\n\nfunction smoothScrollToGallery() {\n  const galleryHeight = gallery.getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["lightbox","SimpleLightbox","renderGalleryImg","parentEl","data","generateMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","apiKey","baseUrl","searchImages","query","page","url","axios","error","form","gallery","loaderWrapperEl","btnLoadMore","perPage","totalContent","totalContentPages","onLoadMore","onSubmitForm","event","currentSearchQuery","iziToast","response","images","smoothScrollToGallery","galleryHeight"],"mappings":"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"}