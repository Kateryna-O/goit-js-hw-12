{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGalleryImg(parentEl, data) {\n  parentEl.innerHTML = generateMarkup(data);\n  lightbox.refresh();\n}\n\nfunction generateMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              \n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" />\n               \n                  <ul class=\"gallery-text\">\n                    <li>\n                      <span>Likes</span>\n                      <p>${likes}</p>\n                    </li>\n                    <li>\n                      <span>Views</span>\n                      <p>${views}</p>\n                    </li>\n                    <li>\n                      <span>Comments</span>\n                      <p>${comments}</p>\n                    </li>\n                    <li>\n                      <span>Downloads</span>\n                      <p>${downloads}</p>\n                    </li>\n                  </ul>\n\n            </a>\n          </li>`\n    )\n    .join(' ');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nimport { renderGalleryImg } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loaderWrapperEl = document.querySelector('.loader-wrapper');\nconst btnLoadMore = document.querySelector('.btn-more');\n\nconst apiKey = '43344529-efab811219d9ae176ef45ef76';\nconst baseUrl = 'https://pixabay.com/api/';\nlet page = 1;\nlet perPage = 15;\nlet currentSearchQuery = null;\nlet totalContent = null;\nlet totalContentPages = null;\nlet allImages = [];\n\nbtnLoadMore.addEventListener('click', onLoadMore);\nform.addEventListener('submit', onSubmitForm);\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  loaderWrapperEl.classList.remove('is-hidden');\n\n  page = 1;\n  perPage = 15;\n  const inputValue = document.getElementById('input-text').value.trim();\n  currentSearchQuery = inputValue;\n\n  if (inputValue !== '') {\n    try {\n      const response = await axios.get(\n        `${baseUrl}?key=${apiKey}&q=${inputValue}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`\n      );\n      const data = response.data;\n      const images = data.hits;\n      totalContent = data.totalHits;\n      totalContentPages = Math.ceil(totalContent / perPage);\n\n      if (images.length > 0) {\n        allImages = images;\n        renderGalleryImg(gallery, allImages);\n        btnLoadMore.classList.remove('is-hidden');\n      } else {\n        iziToast.info({\n          title: 'Info',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        btnLoadMore.classList.add('is-hidden');\n      }\n    } catch (error) {\n      console.error('Error searching images:', error);\n      iziToast.error({\n        title: 'Error',\n        message:\n          'An error occurred while searching for images. Please try again later.',\n      });\n    } finally {\n      loaderWrapperEl.classList.add('is-hidden');\n    }\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term',\n    });\n    loaderWrapperEl.classList.add('is-hidden');\n    btnLoadMore.classList.add('is-hidden');\n  }\n}\n\nasync function onLoadMore(event) {\n  page += 1;\n\n  if (page <= totalContentPages) {\n    loaderWrapperEl.classList.remove('is-hidden');\n    try {\n      const response = await axios.get(\n        `${baseUrl}?key=${apiKey}&q=${currentSearchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`\n      );\n      const images = response.data.hits;\n      if (images.length > 0) {\n        allImages = [...allImages, ...images];\n        renderGalleryImg(gallery, allImages);\n        smoothScrollToGallery();\n      } else {\n        iziToast.info({\n          title: 'Info',\n          message: 'No more images available for this search term.',\n        });\n        btnLoadMore.classList.add('is-hidden');\n      }\n    } catch (error) {\n      console.error('Error loading more images:', error);\n      iziToast.error({\n        title: 'Error',\n        message:\n          'An error occurred while loading more images. Please try again later.',\n      });\n    } finally {\n      loaderWrapperEl.classList.add('is-hidden');\n    }\n  } else {\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    btnLoadMore.classList.add('is-hidden');\n  }\n}\n\nfunction smoothScrollToGallery() {\n  const galleryHeight = gallery.getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["lightbox","SimpleLightbox","renderGalleryImg","parentEl","data","generateMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loaderWrapperEl","btnLoadMore","apiKey","baseUrl","page","perPage","currentSearchQuery","totalContent","totalContentPages","allImages","onLoadMore","onSubmitForm","event","inputValue","axios","images","iziToast","error","smoothScrollToGallery","galleryHeight"],"mappings":"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"}